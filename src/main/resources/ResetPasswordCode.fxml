<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import javafx.scene.image.*?>
<?import javafx.scene.effect.*?>

<StackPane xmlns:fx="http://javafx.com/fxml" fx:controller="Controllers.ResetPasswordCodeController">
    <!-- Background Image with Blur Effect -->
    <ImageView fitWidth="1920" fitHeight="1080" preserveRatio="false">
        <Image url="bg.jpeg"/>
        <effect>
            <GaussianBlur radius="5"/>
        </effect>
    </ImageView>
    
    <!-- Main Content -->
    <VBox alignment="CENTER" maxWidth="450" minWidth="350" spacing="25" 
          style="-fx-background-color: rgba(26, 33, 27, 0.85); -fx-background-radius: 20;">
        <padding>
            <Insets top="40" right="40" bottom="40" left="40"/>
        </padding>
        
        <effect>
            <DropShadow color="rgba(0, 0, 0, 0.3)" radius="10" spread="0.2"/>
        </effect>

        <!-- Logo with glow effect -->
        <ImageView fitHeight="120" fitWidth="120" preserveRatio="true">
            <Image url="logo_white.png"/>
            <effect>
                <Glow level="0.3"/>
            </effect>
        </ImageView>

        <Text style="-fx-fill: #C6B9AB; -fx-font-size: 28px; -fx-font-weight: bold;" 
              text="Réinitialisation du mot de passe"/>
        
        <Text style="-fx-fill: #C6B9AB; -fx-font-size: 14px; -fx-text-alignment: center;" 
              text="Veuillez vérifier votre email et entrer le code de réinitialisation" 
              wrappingWidth="350"/>
        
        <!-- Reset Code Field -->
        <VBox spacing="8" fillWidth="true">
            <Label text="Code de réinitialisation" style="-fx-text-fill: #C6B9AB; -fx-font-size: 14px;"/>
            <TextField fx:id="resetCodeField" 
                      style="-fx-background-color: rgba(198, 185, 171, 0.9); -fx-text-fill: #1A211B; 
                             -fx-prompt-text-fill: #666666; -fx-background-radius: 5;"/>
        </VBox>
        
        <!-- Verify Button -->
        <Button text="Vérifier" 
                style="-fx-background-color: #B05A36; -fx-text-fill: #C6B9AB; 
                       -fx-background-radius: 5; -fx-font-size: 14px; -fx-font-weight: bold;
                       -fx-cursor: hand;"
                onAction="#handleVerifyCode" maxWidth="Infinity">
            <effect>
                <DropShadow color="rgba(0, 0, 0, 0.3)" radius="5"/>
            </effect>
        </Button>

        <!-- Back Button -->
        <Button text="Retour" 
                style="-fx-background-color: transparent; -fx-text-fill: #C6B9AB; 
                       -fx-border-color: #C6B9AB; -fx-border-radius: 5;"
                onAction="#handleBack"/>
        
        <!-- Error Messages -->
        <Label fx:id="messageLabel" style="-fx-text-fill: #B05A36;" wrapText="true" alignment="CENTER"/>
    </VBox>
</StackPane> 